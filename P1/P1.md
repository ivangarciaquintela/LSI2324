# PRACTICA 1 LSI
## Parte 1
<details>
  <summary>a) Configure su máquina virtual de laboratorio con los datos proporcionados por el profesor. Analice los ficheros básicos de configuración (interfaces, hosts, resolv.conf, nsswitch.conf, sources.list, etc.)</summary>

  Respuesta:

  1. Archivo de interfaces( /etc/network/interfaces):
     ```
     auto lo ens33 ens34
     iface lo inet loopback
     iface ens33 inet static
     	address 10.11.48.71
     	netmask 255.255.254.0
     	broadcast 10.11.49.255
     	network 10.11.48.0
     	gateway 10.11.48.1
     iface ens34 inet static
     	address 10.11.50.71
     	netmask 255.255.254.0
     	broadcast 10.11.51.255
     	network 10.11.50.0
     ```
  2. Archivo hosts (/etc/hosts): 
     ```
     127.0.0.1       localhost
     127.0.1.1       debian
     # The following lines are desirable for IPv6 capable hosts
     ::1     localhost ip6-localhost ip6-loopback
     ff02::1 ip6-allnodes
     ff02::2 ip6-allrouters
     ```

  3. Archivo resolv.conf:
     ```
     main udc.pri
     search udc.pri
     nameserver 10.8.12.49
     nameserver 10.8.12.50
     nameserver 10.8.12.47
     ```

  4. Archivo nsswitch.conf(/etc/nssiwtch.conf):
     ```
     passwd:         files systemd
     group:          files systemd
     shadow:         files
     gshadow:        files

     hosts:          files mdns4_minimal [NOTFOUND=return] dns myhostname
     networks:       files

     protocols:      db files
     services:       db files
     ethers:         db files
     rpc:            db files
     netgroup:       nis
     ```
   5. Archivo sources.list (/etc/apt/sources.list) :
      ```
      deb http://deb.debian.org/debian/ buster main
      deb-src http://deb.debian.org/debian/ buster main

      deb https://deb.debian.org/debian-security buster-security main contrib
      deb-src https://deb.debian.org/debian-security buster-security main contrib

      deb http://security.debian.org/debian-security buster/updates main
      deb-src http://security.debian.org/debian-security buster/updates main

      ```
</details>
<details>
  <summary>b)¿Qué distro y versión tiene la máquina inicialmente entregada?. Actualice su máquina a la última versión estable disponible.</summary>

  Respuesta:

  1. Mostramos la distro actual y su versión:
     ```console
     root@debian:/home/lsi# lsb_release -a
     Distributor ID:	Debian
     Description:	Debian GNU/Linux 10 (buster)
     Release:	10
     Codename:	buster
     ```
  2. Para actualizar (desde el usuario 'root'):
  ```console
   root@debian:/home/lsi# apt update -y && apt upgrade -y
   root@debian:/home/lsi# apt dist-upgrade
  ```
  3. Tras ello será necesario reemplazar el sources.list hacia la versión que queremos ,en este caso debian 12 (bookworm), para ello deberemos hacer este paso dos veces ya que primero deberíamos pasar por debian 11 (bullseye). El archivo quedará finalmente así (debian 12):
  ```
      deb https://ftp.debian.org/debian/ bookworm contrib main non-free non-free-firmware
      # deb-src https://ftp.debian.org/debian/ bookworm contrib main non-free non-free-firmware

      deb https://ftp.debian.org/debian/ bookworm-updates contrib main non-free non-free-firmware
      # deb-src https://ftp.debian.org/debian/ bookworm-updates contrib main non-free non-free-firmware

      deb https://ftp.debian.org/debian/ bookworm-proposed-updates contrib main non-free non-free-firmware
      # deb-src https://ftp.debian.org/debian/ bookworm-proposed-updates contrib main non-free non-free-firmwa>

      deb https://ftp.debian.org/debian/ bookworm-backports contrib main non-free non-free-firmware
      # deb-src https://ftp.debian.org/debian/ bookworm-backports contrib main non-free non-free-firmware

      deb https://security.debian.org/debian-security/ bookworm-security contrib main non-free non-free-firmwa>
      # deb-src https://security.debian.org/debian-security/ bookworm-security contrib main non-free non-free->
  ```
  4. Ejecutamos los siguientes comandos y lo tendremos actualizado:
   ```console
   root@debian:/home/lsi# apt update 
   root@debian:/home/lsi# apt upgrade --without-new-pkgs
   root@debian:/home/lsi# apt full-upgrade
   root@debian:/home/lsi# reboot
  ```
</details>
<details>
  <summary> c) Identifique la secuencia completa de arranque de una máquina basada en la distribución de referencia (desde la pulsación del botón de arranque hasta la pantalla de login). ¿Qué target por defecto tiene su máquina?. ¿Cómo podría cambiar el target de arranque?. ¿Qué targets tiene su sistema y en qué estado se encuentran?. ¿Y los services?. Obtenga la relación de servicios de su sistema y su estado. ¿Qué otro tipo de unidades existen?.</summary>

  1. Para ello primero ejecutaremos:
     ```console
     root@debian:/home/lsi# systemctl list-dependencies default.target
     ```
  2. Target por defecto es `graphical.target`, para cambiarlo debemos hacer:
     ```console
     root@debian:/home/lsi# systemctl set-default TARGET
     ```
  3. Los targets del sistema podemos obtenerlos usando el comando 'systemctl list-unit-files --type=target'
  
  4. Cambiaremos el target a 'multi-user.target' ya que el 'graphical.target' no lo necesitaremos :
     ```console
     root@debian:/home/lsi# systemctl set-default multi-user.target
     ```
  5. Para listar a los Servicios del sistema
     ```console
     root@debian:/home/lsi# systemctl list-unit-files --type=service
     ```
</details>
<details>
  <summary>d) Determine los tiempos aproximados de botado de su kernel y del userspace. Obtenga la relación de los tiempos de ejecución de los services de su sistema.</summary>

  1.  Para obtener tiempos aproximados de botado de kernel y userspace:
      ```console
      root@debian:/home/lsi# systemd-analyze
      Startup finished in 4.163s (kernel) + 9.272s (userspace) = 13.436s
      multi-user.target reached after 9.229s in userspace.
      ```
   2. Para tener los tiempo específicos de cada proceso en el boot:
   ```console
   root@debian:/home/lsi# systemd-analyze blame
	4.060s e2scrub_reap.service
	2.624s ifupdown-pre.service
	2.578s dev-sda1.device
	2.410s ModemManager.service
	2.381s NetworkManager.service
	2.356s apparmor.service
	2.127s networking.service
	1.121s user@1000.service
	 829ms systemd-journal-flush.service
	 821ms systemd-udev-trigger.service
	 789ms systemd-timesyncd.service
	 734ms systemd-journald.service
	 713ms systemd-udevd.service
	 670ms keyboard-setup.service
	 664ms polkit.service
	 646ms udisks2.service
	 574ms avahi-daemon.service
	 536ms NetworkManager-wait-online.service
	 526ms dbus.service
	 510ms systemd-logind.service
	 404ms systemd-binfmt.service
	 332ms systemd-tmpfiles-setup.service
	 310ms systemd-modules-load.service
	 274ms cups.service
	 241ms ssh.service
	 219ms rsyslog.service
	 205ms plymouth-start.service
	 195ms pulseaudio-enable-autospawn.service
	 190ms systemd-random-seed.service
	 188ms dev-mqueue.mount
	 188ms sys-kernel-debug.mount
	 187ms sys-kernel-tracing.mount
	 181ms wpa_supplicant.service
	 179ms dev-hugepages.mount
	 160ms systemd-sysusers.service
	 138ms modprobe@dm_mod.service
	 137ms systemd-tmpfiles-setup-dev.service
	 130ms upower.service
	 118ms systemd-update-utmp.service
	....
   ```	
</details>


<details>
  <summary>e) Investigue si alguno de los servicios del sistema falla. Pruebe algunas de las opciones del sistema de registro journald. Obtenga toda la información journald referente al proceso de botado de la máquina. ¿Qué hace el systemd-timesyncd?.</summary>

  1. Comprobar si algun servicio falla:
  ```console
root@debian:/home/lsi# systemctl list-unit-files --type=service --failed
UNIT FILE STATE PRESET

0 unit files listed.
  ```
  
  2. La sentencia `journalctl -u SERVICE` muestra los logs de un servicio:
  ```console
root@debian:/home/lsi# journalctl -u networking.service
sep 14 14:06:00 debian systemd[1]: Starting Raise network interfaces...
sep 14 14:06:01 debian systemd[1]: Started Raise network interfaces.
sep 15 13:38:40 debian systemd[1]: Stopping networking.service - Raise network interfaces...
sep 15 13:38:40 debian systemd[1]: networking.service: Deactivated successfully.
sep 15 13:38:40 debian systemd[1]: Stopped networking.service - Raise network interfaces.
-- Boot 75062fbef4144ed2a2d6367959cdd017 --
sep 15 13:39:11 debian systemd[1]: Starting networking.service - Raise network interfaces...
sep 15 13:39:13 debian systemd[1]: Finished networking.service - Raise network interfaces.
sep 19 13:47:44 debian systemd[1]: Stopping networking.service - Raise network interfaces...
sep 19 13:47:45 debian systemd[1]: networking.service: Deactivated successfully.
sep 19 13:47:45 debian systemd[1]: Stopped networking.service - Raise network interfaces.
-- Boot 253053f1f1b8440f8cef54317e5f0fd0 --
sep 19 13:48:05 debian systemd[1]: Starting networking.service - Raise network interfaces...
sep 19 13:48:07 debian systemd[1]: Finished networking.service - Raise network interfaces.
sep 28 16:44:30 debian systemd[1]: Stopping networking.service - Raise network interfaces...
sep 28 16:44:31 debian systemd[1]: networking.service: Deactivated successfully.
sep 28 16:44:31 debian systemd[1]: Stopped networking.service - Raise network interfaces.
-- Boot 0709ac47e67443d9a356976effa192f7 --
sep 28 16:44:52 debian systemd[1]: Starting networking.service - Raise network interfaces...
sep 28 16:44:54 debian systemd[1]: Finished networking.service - Raise network interfaces.

  ```
  3. El comando `journactl -b` muestra el log del boot actual:
  ```console
root@debian:/home/lsi# journalctl -b
sep 28 16:44:48 debian kernel: Linux version 6.1.0-12-amd64 (debian-kernel@lists.debian.org) (gcc-12 (De>
sep 28 16:44:48 debian kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-6.1.0-12-amd64 root=UUID=4aaea9ef->
sep 28 16:44:48 debian kernel: Disabled fast string operations
sep 28 16:44:48 debian kernel: BIOS-provided physical RAM map:
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009f3ff] usable
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x000000000009f400-0x000000000009ffff] reserved
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x00000000000dc000-0x00000000000fffff] reserved
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x0000000000100000-0x000000005feeffff] usable
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x000000005fef0000-0x000000005fefefff] ACPI data
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x000000005feff000-0x000000005fefffff] ACPI NVS
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x000000005ff00000-0x000000005fffffff] usable
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x00000000f0000000-0x00000000f7ffffff] reserved
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x00000000fec00000-0x00000000fec0ffff] reserved
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved
sep 28 16:44:48 debian kernel: BIOS-e820: [mem 0x00000000fffe0000-0x00000000ffffffff] reserved
sep 28 16:44:48 debian kernel: NX (Execute Disable) protection: active
sep 28 16:44:48 debian kernel: SMBIOS 2.7 present.
sep 28 16:44:48 debian kernel: DMI: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platfor>
sep 28 16:44:48 debian kernel: vmware: hypercall mode: 0x00
sep 28 16:44:48 debian kernel: Hypervisor detected: VMware
sep 28 16:44:48 debian kernel: vmware: TSC freq read from hypervisor : 2294.471 MHz
sep 28 16:44:48 debian kernel: vmware: Host bus clock speed read from hypervisor : 66000000 Hz
sep 28 16:44:48 debian kernel: vmware: using clock offset of 9995438424 ns
sep 28 16:44:48 debian kernel: tsc: Detected 2294.471 MHz processor
sep 28 16:44:48 debian kernel: e820: update [mem 0x00000000-0x00000fff] usable ==> reserved
sep 28 16:44:48 debian kernel: e820: remove [mem 0x000a0000-0x000fffff] usable
sep 28 16:44:48 debian kernel: last_pfn = 0x60000 max_arch_pfn = 0x400000000
sep 28 16:44:48 debian kernel: x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT  
sep 28 16:44:48 debian kernel: found SMP MP-table at [mem 0x000f6a80-0x000f6a8f]
sep 28 16:44:48 debian kernel: RAMDISK: [mem 0x320db000-0x35064fff]
sep 28 16:44:48 debian kernel: ACPI: Early table checksum verification disabled
sep 28 16:44:48 debian kernel: ACPI: RSDP 0x00000000000F6A10 000024 (v02 PTLTD )
sep 28 16:44:48 debian kernel: ACPI: XSDT 0x000000005FEF0284 00005C (v01 INTEL  440BX    06040000 VMW  0>
sep 28 16:44:48 debian kernel: ACPI: FACP 0x000000005FEFEE73 0000F4 (v04 INTEL  440BX    06040000 PTL  0>
sep 28 16:44:48 debian kernel: ACPI: DSDT 0x000000005FEF04C4 00E9AF (v01 PTLTD  Custom   06040000 MSFT 0>
sep 28 16:44:48 debian kernel: ACPI: FACS 0x000000005FEFFFC0 000040
sep 28 16:44:48 debian kernel: ACPI: FACS 0x000000005FEFFFC0 000040
sep 28 16:44:48 debian kernel: ACPI: BOOT 0x000000005FEF049C 000028 (v01 PTLTD  $SBFTBL$ 06040000  LTP 0>
sep 28 16:44:48 debian kernel: ACPI: APIC 0x000000005FEF044C 000050 (v01 PTLTD  ? APIC   06040000  LTP 0>
sep 28 16:44:48 debian kernel: ACPI: MCFG 0x000000005FEF0410 00003C (v01 PTLTD  $PCITBL$ 06040000  LTP 0>
sep 28 16:44:48 debian kernel: ACPI: SRAT 0x000000005FEF0380 000090 (v02 VMWARE MEMPLUG  06040000 VMW  0>
sep 28 16:44:48 debian kernel: ACPI: HPET 0x000000005FEF0348 000038 (v01 VMWARE VMW HPET 06040000 VMW  0>
sep 28 16:44:48 debian kernel: ACPI: WAET 0x000000005FEF0320 000028 (v01 VMWARE VMW WAET 06040000 VMW  0>
sep 28 16:44:48 debian kernel: ACPI: Reserving FACP table memory at [mem 0x5fefee73-0x5fefef66]
sep 28 16:44:48 debian kernel: ACPI: Reserving DSDT table memory at [mem 0x5fef04c4-0x5fefee72]
sep 28 16:44:48 debian kernel: ACPI: Reserving FACS table memory at [mem 0x5fefffc0-0x5fefffff]
sep 28 16:44:48 debian kernel: ACPI: Reserving FACS table memory at [mem 0x5fefffc0-0x5fefffff]
sep 28 16:44:48 debian kernel: ACPI: Reserving BOOT table memory at [mem 0x5fef049c-0x5fef04c3]
sep 28 16:44:48 debian kernel: ACPI: Reserving APIC table memory at [mem 0x5fef044c-0x5fef049b]
sep 28 16:44:48 debian kernel: ACPI: Reserving MCFG table memory at [mem 0x5fef0410-0x5fef044b]
sep 28 16:44:48 debian kernel: ACPI: Reserving SRAT table memory at [mem 0x5fef0380-0x5fef040f]
sep 28 16:44:48 debian kernel: ACPI: Reserving HPET table memory at [mem 0x5fef0348-0x5fef037f]
sep 28 16:44:48 debian kernel: ACPI: Reserving WAET table memory at [mem 0x5fef0320-0x5fef0347]
sep 28 16:44:48 debian kernel: SRAT: PXM 0 -> APIC 0x00 -> Node 0
sep 28 16:44:48 debian kernel: ACPI: SRAT: Node 0 PXM 0 [mem 0x00000000-0x0009ffff]
 ....
```
  
  4.`systemd-timesyncd` es un servicio del sistema que se usa para sincronizar el reloj local del sistema con un servidor NTP remoto. 
  
</details>

<details>
  <summary>f) Identifique y cambie los principales parámetros de su segundo interface de red (ens34). Configure un segundo interface lógico. Al terminar, déjelo como estaba.</summary>

  1. Comprobamos el estado inciial de ens34:
  ```console
root@debian:/home/lsi# ifconfig ens34
	ens34: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.11.50.71  netmask 255.255.254.0  broadcast 10.11.51.255
        inet6 fe80::250:56ff:fe97:1dfa  prefixlen 64  scopeid 0x20<link>
        ether 00:50:56:97:1d:fa  txqueuelen 1000  (Ethernet)
        RX packets 713954  bytes 170064442 (162.1 MiB)
        RX errors 0  dropped 36510  overruns 0  frame 0
        TX packets 554  bytes 67000 (65.4 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 16  base 0x2080  
  ```
  2. Configuramos el segundo interfaz de red:
     - Cambiamos el valor de MTU (Maximum Transmition Unit).
     - Cambiamos la dirección MAC de la interfaz
     - Configuramos la dirección IP y mascara de Red.

```console
root@debian:/home/lsi# ifconfig ens34 down
root@debian:/home/lsi# ifconfig ens34 mtu 1200
root@debian:/home/lsi# ifconfig ens34 hw ether 00:50:56:97:15:21 
root@debian:/home/lsi# ifconfig ens34 10.11.50.71 netmask 255.255.254.0
root@debian:/home/lsi# ifconfig ens34 up
root@debian:/home/lsi# ifconfig ens34
	ens34: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1200
	        inet 10.11.50.71  netmask 255.255.254.0  broadcast 10.11.51.255
	        ether 00:50:56:97:15:21  txqueuelen 1000  (Ethernet)
	        RX packets 714258  bytes 170127584 (162.2 MiB)
	        RX errors 0  dropped 36557  overruns 0  frame 0
	        TX packets 569  bytes 68491 (66.8 KiB)
	        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
	        device interrupt 16  base 0x2080
```
  3. Configuración de una interfaz lógica
```console
root@debian:/home/lsi# ifconfig ens34:1 192.168.1.1 netmask 255.255.255.0
root@debian:/home/lsi# ifconfig ens34:1 up
root@debian:/home/lsi# ifconfig
	ens33: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
	        inet 10.11.48.71  netmask 255.255.254.0  broadcast 10.11.49.255
	        inet6 fe80::250:56ff:fe97:1521  prefixlen 64  scopeid 0x20<link>
	        ether 00:50:56:97:15:21  txqueuelen 1000  (Ethernet)
	        RX packets 222650  bytes 17130576 (16.3 MiB)
	        RX errors 0  dropped 36635  overruns 0  frame 0
	        TX packets 7822  bytes 685652 (669.5 KiB)
	        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
	        device interrupt 19  base 0x2000  
	
	ens34: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1200
	        inet 10.11.50.71  netmask 255.255.254.0  broadcast 10.11.51.255
	        ether 00:50:56:97:15:21  txqueuelen 1000  (Ethernet)
	        RX packets 714410  bytes 170173169 (162.2 MiB)
	        RX errors 0  dropped 36573  overruns 0  frame 0
	        TX packets 579  bytes 69641 (68.0 KiB)
	        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
	        device interrupt 16  base 0x2080  
	
	ens34:1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1200
	        inet 192.168.1.1  netmask 255.255.255.0  broadcast 192.168.1.255
	        ether 00:50:56:97:15:21  txqueuelen 1000  (Ethernet)
	        device interrupt 16  base 0x2080  
	
	lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
	        inet 127.0.0.1  netmask 255.0.0.0
	        inet6 ::1  prefixlen 128  scopeid 0x10<host>
	        loop  txqueuelen 1000  (Local Loopback)
	        RX packets 144  bytes 12131 (11.8 KiB)
	        RX errors 0  dropped 0  overruns 0  frame 0
	        TX packets 144  bytes 12131 (11.8 KiB)
	        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
  ```
  4. Al no hacer ningun cambio persistente al reboot se borrarán los cambios. Si queremos que persista configurarlo en el archivo `/etc/network/interfaces`.
 
</details>
<details>
  <summary>g) ¿Qué rutas (routing) están definidas en su sistema?. Incluya una nueva ruta estática a una determinada red.</summary>

  1.Las rutas definidas en el sistema podemos encontrarlas ejecutando el siguiente comando:
  ```console
root@debian:/home/lsi# ip route show
	default via 10.11.48.1 dev ens33 onlink 
	10.11.48.0/23 dev ens33 proto kernel scope link src 10.11.48.71 
	10.11.50.0/23 dev ens34 proto kernel scope link src 10.11.50.71 
	169.254.0.0/16 dev ens33 scope link metric 1000

root@debian:/home/lsi# route
	Kernel IP routing table
	Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
	default         _gateway        0.0.0.0         UG    0      0        0 ens33
	10.11.48.0      0.0.0.0         255.255.254.0   U     0      0        0 ens33
	10.11.50.0      0.0.0.0         255.255.254.0   U     0      0        0 ens34
	link-local      0.0.0.0         255.255.0.0     U     1000   0        0 ens33

  ```

  2. Añadimos una nueva ruta:
```console
root@debian:/home/lsi# ip route add 10.11.52.0/24 via 10.11.48.1
root@debian:/home/lsi# ip route show
default via 10.11.48.1 dev ens33 onlink 
10.11.48.0/23 dev ens33 proto kernel scope link src 10.11.48.71 
10.11.50.0/23 dev ens34 proto kernel scope link src 10.11.50.71 
10.11.52.0/24 via 10.11.48.1 dev ens33 
169.254.0.0/16 dev ens33 scope link metric 1000 
```
</details>

<details>
  <summary>h) En el apartado d) se ha familiarizado con los services que corren en su sistema. ¿Son necesarios todos ellos?. Si identifica servicios no necesarios, proceda adecuadamente. Una limpieza no le vendrá mal a su equipo, tanto desde el punto de vista de la seguridad, como del rendimiento.</summary>

  1. 
  2. Respuesta:

  - accounts-daemon.service : API para GNOME con las accounts, innecesario ya que solo utilizamos *ssh*
    ```console
    root@debian:/home/lsi# systemctl disable accounts-daemon.service
    	Removed "/etc/systemd/system/graphical.target.wants/accounts-daemon.service".
    root@debian:/home/lsi# systemctl mask accounts-daemon.service
    	Created symlink /etc/systemd/system/accounts-daemon.service → /dev/null.

    ```
  - alsa-restore.service : configurador de sonido.
    ```console
	root@debian:/home/lsi# systemctl disable alsa-restore.service
	root@debian:/home/lsi# systemctl mask alsa-restore.service
		Created symlink /etc/systemd/system/alsa-restore.service → /dev/null.
    ```
  - alsa-state.service : configurador de sonido
    ```console
    root@debian:/home/lsi# systemctl disable alsa-state.service
    root@debian:/home/lsi# systemctl mask alsa-state.service
	Created symlink /etc/systemd/system/alsa-state.service → /dev/null.
    ```
  - avahi-daemon.service : permite a dispositivos de red local comunicarse de manera automática.
    ```console
    root@debian:/home/lsi# systemctl disable avahi-daemon.service
	Removed "/etc/systemd/system/sockets.target.wants/avahi-daemon.socket".
	Removed "/etc/systemd/system/dbus-org.freedesktop.Avahi.service".
	Removed "/etc/systemd/system/multi-user.target.wants/avahi-daemon.service".
    root@debian:/home/lsi# systemctl mask avahi-daemon.service
	Created symlink /etc/systemd/system/avahi-daemon.service → /dev/null.
    ```
  - bluetooth.service : funcionalidad Bluetooth.
    ```console
    root@debian:/home/lsi# systemctl disable bluetooth.service
	Synchronizing state of bluetooth.service with SysV service script with /lib/systemd/systemd-sysv-install.
	Executing: /lib/systemd/systemd-sysv-install disable bluetooth
	Removed "/etc/systemd/system/dbus-org.bluez.service".
	Removed "/etc/systemd/system/bluetooth.target.wants/bluetooth.service".
    root@debian:/home/lsi# systemctl mask bluetooth.service
	Created symlink /etc/systemd/system/bluetooth.service → /dev/null.
    ```
  - bolt.service : administración de dispositivos periféricos.
    ```console
    root@debian:/home/lsi# systemctl disable bolt.service
    root@debian:/home/lsi# systemctl mask bolt.service
	Created symlink /etc/systemd/system/bolt.service → /dev/null.
    ```
  - cups.service : sistema de impresión.
    ```console
    root@debian:/home/lsi# systemctl disable cups.service
	Synchronizing state of cups.service with SysV service script with /lib/systemd/systemd-sysv-install.
	Executing: /lib/systemd/systemd-sysv-install disable cups
	Removed "/etc/systemd/system/sockets.target.wants/cups.socket".
	Removed "/etc/systemd/system/printer.target.wants/cups.service".
	Removed "/etc/systemd/system/multi-user.target.wants/cups.service".
	Removed "/etc/systemd/system/multi-user.target.wants/cups.path".
    root@debian:/home/lsi# systemctl mask cups.service
	Created symlink /etc/systemd/system/cups.service → /dev/null.
    ```
  - ModemManager.service
    ```console
    root@debian:/home/lsi# systemctl disable ModemManager.service
	Removed "/etc/systemd/system/dbus-org.freedesktop.ModemManager1.service".
	Removed "/etc/systemd/system/multi-user.target.wants/ModemManager.service".
    root@debian:/home/lsi# systemctl mask ModemManager.service
	Created symlink /etc/systemd/system/ModemManager.service → /dev/null.
    ```
  - open-vm-tools.service
    ```console
    root@debian:/home/lsi# systemctl disable open-vm-tools.service
	Synchronizing state of open-vm-tools.service with SysV service script with /lib/systemd/systemd-sysv-install.
	Executing: /lib/systemd/systemd-sysv-install disable open-vm-tools
	Removed "/etc/systemd/system/vmtoolsd.service".
	Removed "/etc/systemd/system/multi-user.target.wants/open-vm-tools.service".
    root@debian:/home/lsi# systemctl mask open-vm-tools.service
	Created symlink /etc/systemd/system/open-vm-tools.service → /dev/null.
    ```
  - power-profiles-daemon.service
    ```console
    root@debian:/home/lsi# systemctl disable power-profiles-daemon.service
	Removed "/etc/systemd/system/graphical.target.wants/power-profiles-daemon.service".
    root@debian:/home/lsi# systemctl mask power-profiles-daemon.service
	Created symlink /etc/systemd/system/power-profiles-daemon.service → /dev/null.
    ```
  - NetworkManager.service
    ```console
    root@debian:/home/lsi# systemctl mask NetworkManager.service
	Created symlink /etc/systemd/system/NetworkManager.service → /dev/null.
    ```
  - ff
  - fff
  - 
</details>


<details>
	<summary>
	i) Diseñe y configure un pequeño “script” y defina la correspondiente unidad de tipo service para que se ejecute en el proceso de botado de su máquina.
	</summary>
</details>



<details>
	<summary>
	j) Identifique las conexiones de red abiertas a y desde su equipo.
	</summary>
</details>

<details>
	<summary>
	k) Nuestro sistema es el encargado de gestionar la CPU, memoria, red, etc., como soporte a los datos y procesos. Monitorice en “tiempo real” la información relevante de los procesos del sistema y los recursos consumidos. Monitorice en “tiempo real” las conexiones de su sistema.
	</summary>
</details>

<details>
	<summary>
	l) Un primer nivel de filtrado de servicios los constituyen los tcp-wrappers. Configure el tcp-wrapper de su sistema (basado en los ficheros hosts.allow y hosts.deny) para permitir conexiones SSH a un determinado conjunto de IPs y denegar al resto. ¿Qué política general de filtrado ha aplicado?. ¿Es lo mismo el tcp-wrapper que un firewall?. Procure en este proceso no perder conectividad con su máquina. No se olvide que trabaja contra ella en remoto por ssh.
	</summary>
</details>


<details>
	<summary>
	m) Existen múltiples paquetes para la gestión de logs (syslog, syslog-ng, rsyslog). Utilizando el rsyslog pruebe su sistema de log local. Pruebe también el journald.
	</summary>
</details>



<details>
	<summary>
	n) Configure IPv6 6to4 y pruebe ping6 y ssh sobre dicho protocolo. ¿Qué hace su tcp-wrapper en las conexiones ssh en IPv6? Modifique su tcp-wapper siguiendo el criterio del apartado h).¿Necesita IPv6?. ¿Cómo se deshabilita IPv6 en su equipo?
	</summary>
</details>


## Parte 2
<details>
<summary>
	a) En colaboración con otro alumno de prácticas, configure un servidor y un cliente NTPSec básico.
</summary>
 
</details>

<details>
<summary>
b) Cruzando los dos equipos anteriores, configure con rsyslog un servidor y un cliente de logs.	
</summary>
 
</details>

<details>
<summary>
c) Haga todo tipo de propuestas sobre los siguientes aspectos.: ¿Qué problemas de seguridad identifica en los dos apartados anteriores?. ¿Cómo podría solucionar los problemas identificados?
</summary>
</details>

<details>
<summary>
d) En la plataforma de virtualización corren, entre otros equipos, más de 200 máquinas virtuales para LSI. Como los recursos son limitados, y el disco duro también, identifique todas aquellas acciones que pueda hacer para reducir el espacio de disco ocupado.
</summary>
 
</details>
<details>
<summary>
e) Instale el SIEM splunk en su máquina. Sobre dicha plataforma haga los siguientes puntos.:
</summary>
<details>
	<summary> a. Genere una query que visualice los logs internos del splunk		
	</summary>
</details>

<details>
	<summary> b. Cargué el fichero /var/log/apache2/access.log y el journald del sistema y visualícelos.
	</summary>
</details>

<details>
	<summary> c. Obtenga las IPs de los equipos que se han conectado a su servidor web (pruebe a generar algún tipo de gráfico de visualización), así como las IPs que se han conectado un determinado día de un determinado mes.		
	</summary>
</details>

<details>
	<summary>
		d. Trate de obtener el país y región origen de las IPs que se han conectado a su servidor web y si posible sus coordenadas geográficas.		
	</summary>
</details>

 <details>
	 <summary>
		 e. Obtenga los hosts origen, sources y sourcestypes.
	 </summary>
 </details>
 
 <details>
	 <summary>
		f. ¿cómo podría hacer que splunk haga de servidor de log de su cliente?
	 </summary>
 </details>
</details>




